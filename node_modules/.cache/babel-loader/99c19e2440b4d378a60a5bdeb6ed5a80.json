{"ast":null,"code":"import _defineProperty from \"/home/ali/after-bootcamp/eComerace/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/ali/after-bootcamp/eComerace/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ali/after-bootcamp/eComerace/src/context/cart.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// cart context\nimport React, { useEffect, useState } from \"react\";\nimport localCart from \"../utils/localCart\";\nconst CartContext = React.createContext();\n\nfunction CartProvider({\n  children\n}) {\n  function getValueFromLocalStorage() {\n    return localStorage.getItem(\"cart\") ? JSON.parse(localStorage.getItem(\"cart\")) : [];\n  }\n\n  const _useState = useState(getValueFromLocalStorage()),\n        _useState2 = _slicedToArray(_useState, 2),\n        cart = _useState2[0],\n        setCart = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        total = _useState4[0],\n        setToal = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        cartItem = _useState6[0],\n        setCartItem = _useState6[1];\n\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    let newCartItem = cart.reduce((acc, cur) => {\n      return acc = acc + cur.amount;\n    }, 0);\n    setCartItem(newCartItem);\n    let newTotal = cart.reduce((acc, cur) => {\n      return acc = acc + cur.amount * cur.price;\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setToal(newTotal);\n  }, [cart]);\n\n  const removeItem = id => {\n    const newCart = cart.filter(item => {\n      if (item.id !== id) return item;\n    });\n    setCart(newCart);\n  };\n\n  const increaseItem = id => {\n    const newCart = cart.map(item => {\n      // if (item.id === id) {\n      //     item.amount = item.amount + 1;\n      //     return item;\n      //   }\n      //   return item;\n      return item.id === id ? _objectSpread({}, item, {\n        amount: item.amount + 1\n      }) : _objectSpread({}, item); //  }\n    });\n    setCart(newCart);\n  };\n\n  const decreaseItem = (id, amount) => {\n    if (amount === 1) {\n      removeItem(id);\n    } else {\n      const newCart = cart.map(item => {\n        return item.id === id ? _objectSpread({}, item, {\n          amount: item.amount - 1\n        }) : _objectSpread({}, item);\n      });\n      setCart(newCart);\n    }\n  };\n\n  const addToCart = product => {\n    console.log();\n    const id = product.id,\n          url = product.image.url,\n          title = product.title,\n          price = product.price;\n    const item = [...cart].find(item => item.id === id);\n\n    if (item) {\n      increaseItem(id);\n      return;\n    } else {\n      const newItem = {\n        id,\n        image: url,\n        title,\n        price,\n        amount: 1\n      };\n      const newCart = [...cart, newItem];\n      setCart(newCart);\n    }\n  };\n\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  return React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      total,\n      cartItem,\n      removeItem,\n      increaseItem,\n      decreaseItem,\n      addToCart,\n      clearCart\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, children);\n}\n\nexport { CartContext, CartProvider };","map":{"version":3,"sources":["/home/ali/after-bootcamp/eComerace/src/context/cart.js"],"names":["React","useEffect","useState","localCart","CartContext","createContext","CartProvider","children","getValueFromLocalStorage","localStorage","getItem","JSON","parse","cart","setCart","total","setToal","cartItem","setCartItem","setItem","stringify","newCartItem","reduce","acc","cur","amount","newTotal","price","parseFloat","toFixed","removeItem","id","newCart","filter","item","increaseItem","map","decreaseItem","addToCart","product","console","log","url","image","title","find","newItem","clearCart"],"mappings":"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","sourcesContent":["// cart context\nimport React, { useEffect, useState } from \"react\";\nimport localCart from \"../utils/localCart\";\n\nconst CartContext = React.createContext();\nfunction CartProvider({ children }) {\n  function getValueFromLocalStorage() {\n    return localStorage.getItem(\"cart\")\n      ? JSON.parse(localStorage.getItem(\"cart\"))\n      : [];\n  }\n  const [cart, setCart] = useState(getValueFromLocalStorage());\n\n  const [total, setToal] = useState(0);\n  const [cartItem, setCartItem] = useState(0);\n\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    let newCartItem = cart.reduce((acc, cur) => {\n      return (acc = acc + cur.amount);\n    }, 0);\n    setCartItem(newCartItem);\n    let newTotal = cart.reduce((acc, cur) => {\n      return (acc = acc + cur.amount * cur.price);\n    }, 0);\n    newTotal = parseFloat(newTotal.toFixed(2));\n    setToal(newTotal);\n  }, [cart]);\n  const removeItem = (id) => {\n    const newCart = cart.filter((item) => {\n      if (item.id !== id) return item;\n    });\n    setCart(newCart);\n  };\n  const increaseItem = (id) => {\n    const newCart = cart.map((item) => {\n      // if (item.id === id) {\n      //     item.amount = item.amount + 1;\n      //     return item;\n      //   }\n      //   return item;\n      return item.id === id\n        ? { ...item, amount: item.amount + 1 }\n        : { ...item };\n      //  }\n    });\n    setCart(newCart);\n  };\n  const decreaseItem = (id, amount) => {\n    if (amount === 1) {\n      removeItem(id);\n    } else {\n      const newCart = cart.map((item) => {\n        return item.id === id\n          ? { ...item, amount: item.amount - 1 }\n          : { ...item };\n      });\n      setCart(newCart);\n    }\n  };\n  const addToCart = (product) => {\n    console.log();\n    const {\n      id,\n      image: { url },\n      title,\n      price,\n    } = product;\n    const item = [...cart].find((item) => item.id === id);\n    if (item) {\n      increaseItem(id);\n      return;\n    } else {\n      const newItem = { id, image: url, title, price, amount: 1 };\n      const newCart = [...cart, newItem];\n      setCart(newCart);\n    }\n  };\n  const clearCart = () => {\n    setCart([]);\n  };\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        total,\n        cartItem,\n        removeItem,\n        increaseItem,\n        decreaseItem,\n        addToCart,\n        clearCart,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\nexport { CartContext, CartProvider };\n"]},"metadata":{},"sourceType":"module"}